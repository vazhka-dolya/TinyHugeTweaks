**Прочитать эту страницу по-русски** | [Read this page in English](https://github.com/vazhka-dolya/TinyHugeTweaks/blob/main/README.md)

# Tiny-Huge Tweaks
Это адд-он для [Mario 64 Movie Maker 3](https://github.com/projectcomet64/M64MM), представляющий Вам различный функционал, позволяющий сэкономить время, а также чуть-чуть улучшить Ваши СМ64-машинимы.
<p align="center">
  <img src="https://github.com/vazhka-dolya/TinyHugeTweaks/blob/main/GitHubImg/ReadmeImage2_rus.png" width="666"/>
</p>

# Установка и использование
1. Убедитесь, что у Вас установлена [последняя версия](https://github.com/projectcomet64/M64MM/releases/latest) M64MM3.
2. Скачайте [последнюю версию](https://github.com/vazhka-dolya/TinyHugeTweaks/releases/latest) этого адд-она. Она будет в `.zip`-архиве.
3. Распакуйте содержимое[^1] скачанного архива в коренную папку[^2] M64MM3. Если Вас запросит заменить файлы, то соглашайтесь.
4. Это всё.
# Имеющийся функционал
<details>
  <summary>Нажмите сюда, чтобы развернуть</summary>

## Исправить заморозку камеры
Реализовывает [GameShark-код от sm64rise и integerbang](https://www.youtube.com/watch?v=FBRHespARdY), исправляющий отдаление камеры при её заморозке. Задумано как своего рода «ярлык», чтобы не нужно было заново вводить этот код каждый раз, когда используешь какой-то новый ROM.
## Без поворотов головы
Заменяет обычную анимацию стояния на анимацию чтения/C-Up, которая не имеет потенциально нежелательных вращений головы. Можно включать и выключать. Задумано как ярлык.
## Убрать чёрные полосы
Реализовывает твик из SM64 ROM Manager'а, убирающий чёрные полосы, которые есть в СМ64 и множестве ROM-хаков.

Помечено как тестируемое, потому у меня нет полной уверенности в том, что оно будет работать везде. У меня оно работало в каждой попытке использования.
## Без тени (простое)
Реализовывает простой GameShark-код, убирающий тень у Марио. Скорее всего не будет работать с пользовательскими моделями. Задумано как ярлык.
## Исправить текстуру дыма
Реализовывает твик из SM64 ROM Manager'а, который исправляет ошибку, где у текстуры дыма выставлен формат RGBA16[^3] вместо IA16[^4].
## Продвинутое убирание текстур
Буквально стирает текстуры, превращая их в пустые, полностью прозрачные картинки. Пока что поддерживает убирание теней, пыли, искр, пузырей, эффектов воды и всплесков воды.
## Исправление чёрных текстур
Реализовывает [SM64 Save State Fixer](https://github.com/vazhka-dolya/sm64_save_state_fixer), исправляющий ошибку, где текстуры в старых ROM-хаках могут отображаться чёрными в более новых графических плагинах.
## Звёзды
Позволяет Вам менять модели звёзд из собранных на несобранные и наоборот. Вам нужно поставить игру на паузу перед использованием, иначе СМ64 может вылететь.
### Адреса моделей
Так как у ROM-хаков модели звёзд зачастую хранятся в иных адресах в ОЗУ, данный адд-он позволяет Вам добавлять собственные адреса для моделей звёзд (загляните в `TinyHugeTweaks/starAddresses.config`). Вы можете найти эти адреса используя инструмент по типу [STROOP](https://github.com/SM64-TAS-ABC/STROOP) (рекомендую для него использовать Mupen64).
## Отображение частей тела
Реализовывает GameShark-код, прячущий тело Марио, но так, чтобы можно было настраивать каждую часть тела.

Помечено как тестируемое, потому что сейчас оно не поддерживает другие состояния тела (открытые руки, крылья крылатой кепки, Металлический Марио и т. п.), пользовательские модели и LOD-модели Марио (те, что используются, когда Марио на дистанции от камеры).

</details>

# Требования для компиляции
<details>
  <summary>Нажмите сюда, чтобы развернуть</summary>
  
- Visual Studio 2022.
- Репозиторий M64MM3 в папке под названием `M64MM`, которая находится на одну директорию выше.
  - Пример: если `.sln`-файл BodyStates — `C:/projects/TinyHugeTweaks/TinyHugeTweaks.sln`, то весь репозиторий M64MM3 должен быть в `C:/projects/M64MM`. Желательно, чтобы у путей не было кириллицы.
- Если Вы на Windows, то перед тем, как распаковывать архивы, нажмите правой кнопкой мыши по ним, откройте **Свойства** и посмотрите есть ли опция **Разблокировать**. Если есть, то поставьте на ней галочки и нажмите **Применить**. Если Вы этого не сделаете и архив(-ы) останутся заблокированными, то Вы можете столкнуться с проблемами.
- *В зависимости от ситуации*, Вам *возможно* нужно будет сделать следующее: зайдите в **Меню** > **Средства** > **Диспетчер пакетов NuGet** > **Консоль диспетчера пакетов** и введите `Install-Package HtmlRenderer.WinForms`. После этого, зайдите **Меню** > **Проект** > **Управление пакетами NuGet…** и убедитесь, что у `HtmlRenderer.Core` и `HtmlRenderer.WinForms` последнии версии.

</details>

# Благодарность
- GlitchyPSI ([eго сайт](https://glitchypsi.xyz)) — огромная помощь с тем, как создавать адд-оны;
  - этот адд-он основан на [XStudio MiNi](https://github.com/projectcomet64/xstudio-mini), который был сделан им;
- ToxicBalloonKid ([YouTube](https://www.youtube.com/channel/UCbHbB9MXZYw4WgCeVXbic_Q)) — иконка адд-она;
- LiquoricePie ([Bluesky](https://bsky.app/profile/liquoricepie.bsky.social)) — альтернативная иконка адд-она (зажмите Shift в окне «Об адд-оне»).
### «Если я буду использовать этот адд-он для своих работ, то нужно ли мне указывать твоё авторство?»
Я поощряю указание моего авторства, но никак не заставляю Вас это делать!
[^1]: Это значит *всё* содержимое, включая папку `deps`. Если адд-он вылетает при попытке открыть окно **Об адд-оне**, то убедитесь, что у вас есть файлы `HtmlRenderer.dll` и `HtmlRenderer.WinForms.dll` в папке `deps` в M64MM3.
[^2]: Это та же папка, где хранится и `M64MM.exe`.
[^3]: RGBA16 — формат текстуры, где каждый пиксель занимает шестнадцать бит (два байта): один бит используется для прозрачности (то есть позволяет иметь либо полностью прозрачные, либо полностью непрозрачные пиксели), а красный, зелёный и синий используют по пять бит.
[^4]: IA16 — формат текстуры, где каждый пиксель занимает шестнадцать бит (два байта): первые восемь бит используются для чёрно-белой интенсивности, а остальные восемь — для прозрачности (что, в отличии от RGBA16, позволяет иметь полупрозрачные пиксели).
